# IAM の概要

## IAM とは

### AWS Identity and Access Management(IAM)は安全に AWS 操作を実施するための認証・認可の仕組み

- AWS 利用者認証の実施
- アクセスポリシーの設定
- ユーザー個人またはグループごとに設定

## ルートユーザ

### 最初に作成されるのがルートユーザーであり、通常の管理には使用しないアカウント

- AWS アカウント作成時に作られる ID アカウント
- 全ての AWS サービスとリソースを使用できる権限を有するユーザー
- 日常的なタスクはルートユーザーを使用しないことが強く推奨される

### ルートユーザーにしかできない操作権限が存在する

【ルートユーザーのみの実施権限】

- AWS ルートアカウントのメールアドレスやパスワードの変更
- IAM ユーザーの課金情報へのアクセスに関する avtivate/deactivate
- 他の AWS アカウントへの Route53 のドメイン登録の移行
- CloudFront のキーペアの作成
- AWS サービスのキャンセル
- AWS アカウントの停止
- コンソリデイテッドビリングの設定
- 脆弱性診断フォームの提出
- 逆引き DNS 申請

## IAM ポリシー

### IAM ポリシーを作成してユーザーなどへのアクセス権限を付与(JSON 形式の文書)

例)

A ポリシー

    EC2：〇
    S3:×

B ポリシー

    EC2：〇
    S3：〇

【管理ポリシー】

- AWS 管理ポリシー

  AWS が作成および管理する管理ポリシー

- カスタマー管理ポリシー

  AWS アカウントで作成・管理する管理ポリシー。同じポリシーを複数の IAM エンティティにアタッチできる

【インラインポリシー】

- 自身で作成および管理するポリシー

  1 つのプリンシパルエンティティ(ユーザー、グループ、ロール)に埋め込まれた固有ポリシーで、プリンシパルエンティティにアタッチすることができる

### ユーザーベースとリソースベースのポリシー適用がある

- ユーザーベースのポリシー適用
- リソースベースのポリシー適用

  - S3 バケット
  - SNS
  - SQS

    ⇒AWS リソース間のアクセスを可能にする

## アクセス権限の一時付与

### 一時的なアクセス権限の付与を可能にする

【AWS Security Token Service(STS)】

動的に IAM ユーザーを作り、一時的に利用するトークンを発行するサービス

【Temporary Security Credentials】

AWS に対して一時的な認証情報を作成する仕組み
